# Этап 1: Базовый образ (используем ту же версию для консистентности)
FROM python:3.11-slim

# Этап 2: Установка рабочей директории
WORKDIR /app

# Этап 3: Установка зависимостей
# Копируем файл с зависимостями из папки streamlit
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Этап 4: Копирование кода приложения
# Копируем всё из папки streamlit в рабочую папку контейнера
COPY . .

# Этап 5: Открытие порта
# Сообщаем Docker, что наше приложение будет работать на порту 8501.
# Это больше для документации, но является хорошей практикой.
EXPOSE 8501

# Этап 6: Команда для запуска Streamlit
# Запускаем Streamlit и говорим ему быть доступным извне контейнера
CMD ["streamlit", "run", "app/streamlit_app.py", "--server.address", "0.0.0.0"]